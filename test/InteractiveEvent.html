<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="../dist/Moco.js"></script>
</head>
<body>
<div id="wrap1" style="position:absolute;top:0;left:0;background:red;width:1000px;height:1000px;overflow: hidden;">
    <div id="wrap2" style="position:absolute;top:0;left:0;background:red;width:400px;height:300px;overflow:hidden;">
        <canvas id="canvas" width="400" height="300"></canvas>
    </div>
</div>
<script>
    var Moco = require("Moco");
    var stage = new Moco.Stage("canvas",function(){
        console.log("start!");
    });

    // var bottomShape = new Moco.Shape();
    // bottomShape.drawArc(1,"#0f0f0f",[25,25,25,0,2*Math.PI,true],true,"#f0f0f0");

    // var bottomSprite = new Moco.Sprite();
    // bottomSprite.graphics = bottomShape;

    // bottomSprite.on(Moco.MouseEvent.MOUSEDOWN,function(event){
    //     event.preventDefault();
    //     console.log("bottom");
    // })

    // stage.addChild(bottomSprite);

    var shape = new Moco.Shape();
    shape.rotate = 45;
    shape.drawArc(1,"#0f0f0f",[25,25,25,0,2*Math.PI,true],true,"#f0f0f0");
    
    var spriteChild = new Moco.Sprite();
    spriteChild.graphics = shape;

    var shape1 = new Moco.Shape();
    shape1.drawVertices(1,"#ffbbff",[[0,0],[100,0],[100,100],[0,100]]);

    var sprite = new Moco.Sprite();
    sprite.rotate = 45;
    sprite.x = sprite.y = 100;
    sprite.graphics = shape1;
    
    sprite.addChild(spriteChild);
    stage.addChild(sprite);

    var obj = null;
    spriteChild.on(Moco.MouseEvent.MOUSEDOWN,function(event){
        event.preventDefault();
        console.log("top");
        obj = sprite;
    });

    stage.on(Moco.MouseEvent.MOUSEDOWN,function(event){
        stage.on(Moco.MouseEvent.MOUSEMOVE, function(event){
            if(obj){
                obj.x = event.x;
                obj.y = event.y;
            }
        });
        stage.on(Moco.MouseEvent.MOUSEUP, function(event){
            obj = null;
            stage.off(Moco.MouseEvent.MOUSEMOVE);
            stage.off(Moco.MouseEvent.MOUSEUP);
        });
    });
</script>
</body>
</html>